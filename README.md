# ê°•ì˜ ì˜ìƒ í¬ë¡¤ë§í•˜ê¸°

# ì‹œì‘í•˜ê¸°

ì½”ë¡œë‚˜19ë¡œ ì¸í•˜ì—¬ ê±°ì˜ ëŒ€ë¶€ë¶„ì˜ ìˆ˜ì—…ì´ ë…¹í™” ê°•ì˜ë¡œ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë§¤ ìˆ˜ì—… ë•Œë§ˆë‹¤ ì´í´ë˜ìŠ¤ì— ë“¤ì–´ê°€ì„œ ê°•ì˜ë¥¼ í•˜ë‚˜ì”© ë³´ê³  ìˆ˜ê°• ê¸°ë¡ì„ ë‚¨ê²¨ì•¼ í•©ë‹ˆë‹¤.

ê·¸ëŸ°ë° ë§ì…ë‹ˆë‹¤. ë¶ˆí¸í•˜ë‹¨ ë§ì´ì£ .

ê°•ì˜ ë“¤ì„ ë•Œë§ˆë‹¤ 3ì´ˆì”© í•™êµ ë§ˆí¬ ë‚˜ì˜¤ëŠ” ê²ƒë„ ì‹«ê³  ë¶ˆí•„ìš”í•œ ë‚´ìš©ì„ ê±´ë„ˆë›°ê²Œë„ ëª»í•˜ê²Œ í•´ ë†“ì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ ë§¤ë²ˆ ë¡œê·¸ì¸í•˜ëŠ” ê±´ ì •ë§ ê·€ì°®ì•„ìš”

ì ê·¸ëŸ¼ ì–´ë–»ê²Œ í•˜ëŠ”ê°€?ë¥¼ ê³ ë¯¼í•´ ë³´ë©´ ì €ëŠ” ë™ì˜ìƒì„ ëª¨ì¡°ë¦¬ ë‹¤ìš´ ë°›ì•„ ë²„ë¦¬ìëŠ” íšê¸°ì ì¸ ê²°ë¡ ì— ì´ë¥´ë €ê³ , Seleniumì„ ì´ìš©í•´ ëª©ì ì„ ì™„ìˆ˜í•  ì‘ë‹¹ì„ ê¾¸ë°‰ë‹ˆë‹¤.

# 1. êµ¬ì„±í•˜ê¸°

í¬ë¡¤ë§ ê¸°ìˆ ì€ ë‹¹ì—°íˆ ë§ˆë²•ì˜ Seleniumì„ ì‚¬ìš©í•´ì•¼ê² ì£ . ê·¸ë¦¬ê³  í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ”... ì˜¤ëœë§Œì— ë‹¤ë¤„ë³´ëŠ” íŒŒì´ì¬ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì£ ! íŒŒì´ì¬ì´ ë‹¤ë¥¸ ì–¸ì–´ë³´ë‹¤ ê¸°ë³¸ ë¬¸ë²•ì´ ê°„ë‹¨í•˜ê³  íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ê¸° í¸í•´ì„œ ë³´ê¸°ê°€ ì¢‹ê±°ë“ ìš”. ~~ë‹¤ë¥¸ ì–¸ì–´ëŠ” main ë§Œë“¤ì–´ì•¼í•´ì„œ ì§€ì €ë¶„í•¨...~~

ë˜í•œ í¬ë¡¬ ë¸Œë¼ìš°ì €ë¥¼ ì´ìš©í•´ì„œ ì‘ì „ì„ í¼ì³ë³´ì•„ìš”. í¬ë¡¬ ê°œë°œì ë„êµ¬ê°€ ê¸°ëŠ¥ì´ ë§ê³  ì§ê´€ì ì´ë¼ì„œ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ë‹µë‹ˆë‹¤.

# 2. ì‘ë‹¹í•˜ê¸°

## 1. ë¡œê·¸ì¸ ë¿Œì…”

ë¨¼ì € ë¡œê·¸ì¸ì„ í•´ì•¼í•©ë‹ˆë‹¤. ì €ëŠ” ë¡œê·¸ì¸í•˜ì§€ë„ ì•Šê³  ê°•ì˜ë“¤ì˜ ê³ ìœ ê°’ì„ ë”°ì˜¤ëŠ” ë°©ë²•ì„ ëª¨ë¥´ê±°ë“ ìš” ã… ã…  ~~ì•„ì‹œëŠ” ë¶„ ì—°ë½ ì¢€~~ ë¡œê·¸ì¸í•˜ëŠ” ê±´ êµ¬ê¸€ì— Selenium ê²€ìƒ‰í•˜ë©´ ìˆ˜ë‘ë£©í•˜ê²Œ ë‚˜ì˜¤ë‹ˆê¹Œ íŒ¨ìŠ¤~

ì•„ ë¡œê·¸ì¸ ë„ˆë¬´ ìì£¼í•˜ë‹ˆê¹Œ ì„œë²„ì—ì„œ ì´ìƒì§•í›„ ê°ì§€í•´ì„œ ì°¨ë‹¨ ë‹¹í–ˆì–´ìš”ğŸ˜¥ ê·¸ ë‹¤ìŒë¶€í„°ëŠ” ì™ ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ì•ˆë¨¹íˆë„¤ìš”. ê³„ì† ì˜¤ë¥˜ê°€ ë‚¨

## 2. ìˆ˜ê°• ëª©ë¡ ê°€ì ¸ì˜¤ê¸°

ë¡œê·¸ì¸ì„ í•˜ê³  ëŒ€ì‹œë³´ë“œë¥¼ ë“¤ì–´ê°€ë©´ ë‚´ê°€ í˜„ì¬ ë“£ê³  ìˆëŠ” ìˆ˜ì—…ì´ ì¹´ë“œ í˜•ì‹ìœ¼ë¡œ ë–  ìˆì–´ìš”. ì´ì œ ì €ê²ƒë“¤ì„ ëª¨ë‘ ë¶„í•´í•´ì„œ ê°•ì˜ ì´ë¦„ê³¼ ê°•ì˜ ê³ ìœ ë²ˆí˜¸ë¥¼ ì¶”ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

ì´ ë¶€ë¶„ë„ HTML ìì„¸íˆ ë³´ê³  ë°˜ë³µë¬¸ ëŒë ¤ì„œ í•˜ë‚˜ì”© ë°°ì—´ì— ë„£ìœ¼ë©´ ì‰½ê²Œ ëë‚œë‹µë‹ˆë‹¤!

ë‹¤ë§Œ ë°°ì—´ì— ë„£ì„ ë•Œ ìë£Œí˜•ì„ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ëŠ” ì¢€ ë” ê³ ë¯¼í•´ ë´ì•¼ê² ì–´ìš”. ì§€ê¸ˆì€ ë‹¨ìˆœíˆ courseName, courseNumber ë°°ì—´ì—ë‹¤ê°€ ë„£ì—ˆëŠ”ë° í´ë˜ìŠ¤ë¡œ ì§œì•¼í• ê¹Œ ì‹¶ì–´ìš”.

## 3. ê° ê°•ì˜ë³„ë¡œ ì˜ìƒë²ˆí˜¸ ì¶”ì¶œí•˜ê¸°

ì—¬ê¸°ê°€ ì œ ì½”ë“œì˜ ê°€ì¥ í° ê³ ë¯¼ê±°ë¦¬ì´ì ë¶„ê¸°ì ì´ì—ìš”. HTML ë¶„ì„ì„ ê³„ì†í•˜ë‹¤ ë³´ë‹ˆ ê° ì˜ìƒì—ëŠ” IDê°’ì´ í• ë‹¹ ë˜ì–´ ìˆë”ë¼ê³ ìš”. ê·¸ ì•„ì´ë”” ê°’ë§Œ ì•Œë©´ êµ³ì´ ë¡œê·¸ì¸í•˜ì§€ ì•Šì•„ë„ ì˜ìƒì„ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆì–´ìš”

ì´ ì‚¬ì‹¤ì„ ì•Œê³  ë‚˜ì„œ ì½”ë“œì˜ ì§„í–‰ì„ ê²°ì •ì„ í–ˆëŠ”ë° "ì˜ìƒ ë²ˆí˜¸ë§Œ ì£½ ì¶”ì¶œí•œ ë‹¤ìŒ ë‹¤ìš´ì„ ë°›ì"ì˜€ì£ . Seleniumì˜ ì¥ì ì´ì ë‹¨ì ì´ í˜„ì‹¤ ê·¸ëŒ€ë¡œ í‘œí˜„í•˜ëŠ” ê±´ë° ê·¸ê²Œ ì„œë²„ì—ì„œ HTMLíŒŒì¼ì„ ì¼ì¼ì´ ê¸°ë‹¤ë ¤ì•¼ í•˜ë‹ˆ ì†ì´ í„°ì ¸ìš”. 

ê²°ì •ì„ í•˜ê³  ì¶”ì¶œí•˜ë ¤ í•˜ë‹ˆê¹Œ ì˜ì™¸ì˜ ë²½ì— ë§‰í˜”ì–´ìš”. ë°”ë¡œ iframe ì•ˆì˜ HTMLì†ŒìŠ¤ê°€ ì•ˆ ë³´ì´ëŠ” ê±°ì—ìš”.

### Iframe ì²˜ë¦¬í•˜ê¸°

Seleniumì„ ë‹¤ë£¨ì‹œëŠ” ë¶„ë“¤ì„ ë¨¸ë¦¿ì†ì— ë°•ì•„ë†”ì•¼ í•˜ëŠ” ë‚´ìš©ì´ë¼ ìƒê°í•´ìš”

í¬ë¡¬ ê°œë°œì ë„êµ¬ì—ì„œëŠ” Iframe ì•ˆì´ ë³´ì¼ ê±´ë° íŒŒì´ì¬ì—ì„œëŠ” ê³„ì† ì•ˆë³´ì—¬ìš”. ê·¸ ì´ìœ ê°€ iframeì€ ë¶€ëª¨ HTMLì´ ìì‹ HTMLì„ í‘œí˜„í•˜ëŠ” ìˆ˜ë‹¨ì´ë¼ì„œ ê·¸ëŸ°ê°€ë´ìš”. ê·¸ëŸ´ ë•ŒëŠ” Seleniumì—ì„œ ì§€ì›í•˜ëŠ” switch_to.frameì„ ì‚¬ìš©í•˜ì…”ì•¼ ë˜ìš”.

```python
# iframeì— ì ‘ê·¼í•˜ê¸°
iframe = driver.find_element_by_id("id")
driver.switch_to.frame(iframe)

# ë¶€ëª¨ HTMLë¡œ ëŒì•„ê°€ê¸°
driver.switch_to.parent_frame()
```

### í´ë¦­ì´ ì•ˆë  ë•Œ

ì´ì œ ê° ê°•ì˜ë¥¼ í´ë¦­í•˜ì‹  í›„ ì˜ìƒ ì •ë³´ë¥¼ ê°€ì ¸ ì˜¤ë©´ ë©ë‹ˆë‹¤. ì´ë•Œë„ ê¸°ì–µí•´ì•¼ í•  ê²ƒ í•˜ë‚˜!

DivëŠ” ë²„íŠ¼ì´ ì•„ë‹ˆë¼ì„œ ìë™ìœ¼ë¡œ í´ë¦­ì´ ì•ˆë¼ìš”ã… ã…  ì´ëŸ´ ë•Œì—ëŠ” ê°•ì œë¡œ javascript ë‹¨ì—ì„œ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ë©´ ìŠ¤ë¬´ìŠ¤í•˜ê²Œ ì„±ê³µí•©ë‹ˆë‹¤.

```python
div = driver.find_element_by_id("id")
driver.execute_script("arguments[0].click()"), div)
```

## 4. ì˜ìƒ ë‹¤ìš´ë°›ê¸°

ì˜ìƒ ë‹¤ìš´ ë°›ëŠ” ê²ƒì€ ì‰¬ìœ„ìš”.

ê·¸ë˜ì„œ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ì„œ ë‹¤ìš´ ë°›ì•„ ë³´ëŠ” ê²ƒì„ ì‹œë„í•´ ë³´ê³  OS ì‹œê°„ì— ë°°ìš´ Semaphoreë„ ì¨ë¨¹ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤.

ì•„ ê·¸ë¦¬ê³  write ëª…ë ¹ì˜ ë°˜í™˜ê°’ì´ 1238ì´ë©´ ë¹„ì •ìƒì ì¸ ë™ì˜ìƒì„ ë‹¤ìš´ ë°›ëŠ” ê±°ë”ë¼êµ¬ìš”

```python
import requests
import os
import threading, requests, time

def createFolder(directory):
    try:
        if not os.path.exists(directory): os.makedirs(directory)
    except OSError:
        print ('Create '+ directory +' Folder Error')

def download(className, root_dir, numSection, video_id, video_name):
    createFolder(root_dir + "/" + className)
    createFolder(root_dir + "/" + className + "/" + str(numSection+1)+"ì£¼ì°¨")
    
    if len(video_name) > 10: video_name = video_name[:10]
    
		# contentsë¶€ë¶„ì˜ urlì´ ë¶ˆë¶„ëª…í•´ ê·¸ëƒ¥ ë¬´ì¡°ê±´ ë•Œë ¤ ë„£ì–´ë³´ëŠ” ë°©ë²•;;
    for idx in range(10):
        try:
            url = "https://cau.commonscdn.com/contents"+str(idx)+"/cau1000001/"+video_id+"/contents/media_files/mobile/ssmovie.mp4"
            myfile = requests.get(url)
            code = open(root_dir+"/"+className+"/"+str(numSection+1)+"ì£¼ì°¨"+"/"+video_name+".mp4", 'wb').write(myfile.content)
            
						# ë‹¤ìš´ ì„±ê³µ!
            if code != 1238: break       
        except:
            print(code, url)
    if idx == 99:
        print("Download Error at " + className +", week"+ str(numSection+1) +", code: "+ video_id)
        
def download_all(vidoes_class, root_dir, classNames):
    sema = threading.Semaphore(10)
    
    for sections, className in zip(videos_class, classNames):
        for numSection, section in enumerate(sections):
            for lecture in section:
                sema.acquire()
                time.sleep(1)
                download(className, root_dir, numSection, lecture[0], lecture[1])
                sema.release()
```

# 3. ê²°ë¡ 

í™•ì‹¤íˆ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ Seleniumì„ ë” ê¹Šì´ ë°°ì› ë‹¤. íŠ¹íˆ iframeì— ì ‘ê·¼í•˜ëŠ” ê²ƒê³¼ ë²„íŠ¼ í´ë¦­ì„ Javascriptë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ê½¤ë‚˜ ìœ ìš©í•˜ë‹¤.